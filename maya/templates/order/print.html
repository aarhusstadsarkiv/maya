{% import "macros/basic_macros.html" as basic_macros with context %}

{% extends "empty.html" %}

{% block body_class %}page-orders-record-html{% endblock %}

{% block head %}
<!-- set in case user is using light theme. This is meant for print only -->
<link rel="stylesheet" href="http://localhost:5555/static/css/light.css?v={{ get_setting('version') }}">

<link rel="stylesheet" href="{{ url_for('static', path='/css/table.css') }}?v={{ get_setting('version') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/css/orders.css') }}?v={{ get_setting('version') }}">
<title>Bestillingseddel - AarhusArkivet</title>
{% endblock head %}

{% block content %}

{% for order_data in orders %}
{% set order = order_data.order %}
{% set material_base_info = order_data.material_base_info %}
{% set resources = order_data.resources %}
{% set legal_info = order_data.legal_info %}
<div class="print-container">

    <div class="print-section">

        <div class="print-logo">
            <img src="{{ url_for('static', path='assets/orders-logo.png') }}" alt="Logo">
        </div>

        <div class="print-date">
            <p>Dato for bestilling: {{ order.created_at_human }}</p>
        </div>

        <h2>Bestilling af materiale fra AarhusArkivet</h2>

        <h3>Bestiller</h3>
        <table>
            <tbody>
                <tr>
                    <td class="width-200">Navn</td>
                    <td>{{ order.user_display_name }}</td>
                </tr>
                <tr>
                    <td class="width-200">E-mail</td>
                    <td>{{ order.user_email }}</td>
                </tr>
            </tbody>
        </table>

        <h3>Materiale</h3>
        <table>
            <tbody>
                {% for key, value in material_base_info.items() %}
                <tr>
                    <td class="width-200">{{ translate("label_" + key) }}</td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>


    </div>

    <div class="print-section" style="margin-top: 20px;">
        {% if resources %}
        <h3>Til brug på magasin</h3>
        <table>
            <tbody>
                {% for key, value in resources.items() %}
                <tr>
                    <td class="width-200">{{ key }}</td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

        <h3>Tilgængelighed og anden juridisk beskyttelse</h3>
        <table>
            <tbody>
                {% for key, value in legal_info.items() %}
                <tr>
                    <td class="width-200">{{ translate("label_" + key) }}</td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="print-footer">
        Denne bestillingseddel skal følge arkivenheden
    </div>

</div>
{% endfor %}


<style>
*,
*::before,
*::after {
  box-sizing: border-box;
}

body,
html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-size: 14px;
  color: #000;
}

.print-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100%;
}

.print-section {
  flex: 1;
}

.print-footer {
  margin-top: auto;
  text-align: center;
  padding-top: 20px;
}

.print-date {
  position: absolute;
  right: 0;
  top: 0;
}

.print-logo img {
  max-width: 150px;
  margin-top: 20px;
}

@media print {
  @page {
    margin: 10mm;
  }

  .print-container {
    position: relative;
    height: 100%;
    min-height: 100%;
    break-after: page;
    page-break-after: always;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  .print-container:last-child {
    break-after: auto;
    page-break-after: auto;
  }

  .print-section {
    flex: 0 0 50%;
    height: 50%;
    position: relative;
    display: block !important;
    overflow: hidden;
    page-break-inside: avoid;
    break-inside: avoid;
  }

  .print-section[style] {
    margin-top: 0 !important;
  }

  .print-footer {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0;
    padding-top: 0;
    padding-bottom: 8mm;
    text-align: center;
  }

  .print-date {
    position: absolute;
    right: 0;
    top: 0;
  }
}


</style>


{% endblock content %}