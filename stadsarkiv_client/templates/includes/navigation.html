{% import "macros/common_macros.html" as common_macros %}

<div class="main-menu-overlay">
    {% for menu_item in main_menu_user %}
        {% if menu_item.type == 'overlay' %}
            <a href="{{ url_for(menu_item.name) }}{{ query }}">{{ menu_item.title }}</a>
        {% endif %}
    {% endfor %}

    {% for section in main_menu_sections %}
        <h3>{{ section.title }}</h3>
        {% for page in section.pages %}
        <a href="{{ url_for(page.name) }}">{{ page.title }}</a>
        {% endfor %}
    {% endfor %}
</div>

<div class="navigation-right-group">
    {# static items. Text menu items #}

    {% for menu_item in main_menu_user %}
        {% if menu_item.type == 'text' %}
            <div class="menu-text">
            {% if menu_item.name == 'search_get' %}
                <a href="{{ url_for(menu_item.name) }}?{{ query_str_display }}">{{ menu_item.title }}</a>        
            {% else %}
                <a href="{{ url_for(menu_item.name) }}">{{ menu_item.title }}</a>
            {% endif %}
            </div>
        {% endif %}
        {% if menu_item.type == 'icon' %}
            {% if menu_item.name == 'search_get' %}
                <a href="{{ url_for(menu_item.name) }}?{{ query_str_display }}">
                    <div class="menu-icon">{{ get_icon(menu_item.icon)|safe }}</div>
                </a>
            {% else %}
                <a href="{{ url_for(menu_item.name) }}">
                    <div class="menu-icon">{{ get_icon(menu_item.icon)|safe }}</div>
                </a>
            {% endif %}
        {% endif %}
    {% endfor %}
    
    <a href="#">
        <div id="menu-hamburger">
            <div class="menu-icon closed">
                {{ get_icon('menu')|safe }}
            </div>
            <div class="menu-icon open"  style="display: none">
                {{ get_icon('menu_open')|safe }}
            </div>
        </div>
    </a>
</div>