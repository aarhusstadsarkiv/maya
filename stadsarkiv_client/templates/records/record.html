{% extends "base.html" %}

{% block content %}

{% include "includes/main_title.html" %}

{% macro record_label (label) %}
{% set label = "label_" + label %}
<div class="media-object-section media-object-label">
    <strong>{{ translate(label) }}</strong>
</div>
{% endmacro %}

{% macro parse_collectors (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?collectors={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_content_types (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?content_types={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_curators (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?curators={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_creators (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?creators={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_subjects (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?subjects={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_series_normalized (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?{{ item.query }}">{{ item.series }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_collection (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        <a href="/search?collection={{ value.id }}">{{ value.label }}</a>
    </div>
</div>
{% endmacro %}

{% macro parse_organisations (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?organisations={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_locations (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {% for item in value %}
            <a href="/search?locations={{ item.id }}">{{ item.label }}</a>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{% macro parse_desc_data (key, value) %}
<div class="media-object">
    {% for key, item in value.items() %}
    <div class="media-object-section media-object-label">
        <strong>{{ key }}</strong>
    </div>
    <div class="media-object-section">
    {{ item }}
    </div>
    {% endfor %}
</div>
{% endmacro %}

{% macro parse_admin_notes (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {{ value }}
    </div>
</div>
{% endmacro %}

{% macro parse_contractual_status (key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {{ value.label }}
    </div>
</div>
{% endmacro %}

{% macro parse_label(key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        {{ value.label }}
    </div>
</div>
{% endmacro %}

{% macro parse_primitive(key, value) %}
<div class="media-object">

    {{ record_label(key)}}
    <div class="media-object-section">
        {{ value }}
    </div>
</div>
{% endmacro %}

{% macro parse_portrait(key, value) %}
<div class="media-object">
    {{ record_label(key)}}
    <div class="media-object-section">
        <img src="{{ value }}" alt="{{ key }}" />
    </div>
</div>
{% endmacro %}

{% macro parse_header(key, value) %}
    <h3>{{ value }}</h3>
{% endmacro %}

{% set skip = ['series', 'last_updated'] %}

{% macro print_record(record_dict) %}
    {% for key, value in record_dict.items() if not key in skip %}
        {{ parse_header(key) }}

        {% if key == 'collectors' %}
            {{ parse_collectors(key, value) }}
        {% elif key == 'content_types' %}
            {{ parse_content_types(key, value) }}
        {% elif key == 'curators' %}
            {{ parse_curators(key, value) }}
        {% elif key == 'creators' %}
            {{ parse_curators(key, value) }}
        {% elif key == 'collection' %}
            {{ parse_collection(key, value) }}
        {% elif key == 'subjects' %}
            {{ parse_subjects(key, value) }}
        {% elif key == 'series_normalized' %}
            {{ parse_series_normalized(key, value) }}
        {% elif key == 'organisations' %}
            {{ parse_organisations(key, value) }}
        {% elif key == 'desc_data' %}
            {{ parse_desc_data(key, value) }}
        {% elif key == 'admin_notes' %}
            {{ parse_admin_notes(key, value) }}
        {% elif key == 'locations' %}
            {{ parse_locations(key, value)}}
        {% elif key == 'contractual_status' %}
            {{ parse_label(key, value) }}
        {% elif key == 'availability' %}
            {{ parse_label(key, value) }}
        {% elif key == 'copyright_status' %}
            {{ parse_label(key, value) }}
        {% elif key == 'heading' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'registration_id' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'date_from' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'created_by' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'id' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'other_legal_restrictions' %}
            {{ parse_label(key, value) }}
        {% elif key == 'last_updated_by' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'date_to' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'created' %}
            {{ parse_primitive(key, value) }}
        {% elif key == 'usability' %}
            {{ parse_label(key, value)}}
        {% elif key == 'schema' %}
            {{ parse_primitive(key, value)}}
        {% elif key == 'type' %}
            {{ parse_primitive(key, value)}}
        {% elif key == 'portrait' %}
            {{ parse_portrait(key, value)}}
        {% else %}
            {{ parse_primitive(key, value)}}
        {% endif %}
    {% endfor %}
{% endmacro %}

{{ print_record(record_dict) }}

<pre>
    {{ record_json }}
</pre>

{% endblock content %}