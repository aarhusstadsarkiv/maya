

{% import "macros/common_fields.html" as common_fields %}

{% macro parse_portrait_image(key, value) %}
{# used for displaying a single image #}
{% set image = value['value'][0] %}
<div class="record-representation">    
    <img class="record-image" src="{{ image }}" alt="{{ translate('Image') }}" />
    <div class="overlay overlay-hidden">
        <img id="overlay-image" src="{{ image }}" alt="{{ translate('Large Image') }}">
    </div>
</div>

{% endmacro %}

{% macro parse_block_first(title, block_keys, data) %}
{% if key_exist_in_dict(block_keys, data) %}
<div class="record-section">

    {% if data['portrait'] %}
    {{ parse_portrait_image("Portrait", data['portrait']) }}
    {% endif %}

    <div class="record-main">
        <h3 class="record-header">{{ title }}</h3>
        {% for key in block_keys %}
        {% if key in data %}
        {{ common_fields.parse_block_section(data[key]) }}
        {% endif %}
        {% endfor %}
    </div>
</div> 
{% endif %}
{% endmacro %}

{% extends "base.html" %}

{% block body_class %}collectors{% endblock %}

{% block head %}

<link rel="stylesheet" href="{{ url_for('static', path='/css/overlay.css') }}?v={{ get_setting('version') }}">
<script type="module">
    import { activateOverlay } from "/static/js/overlay.js";
    activateOverlay('.record-representation');
</script>
{% endblock head %}

{% block content %}

{% include "includes/main_title.html" %}

<p>
    <a href="/search?collector={{ collector['id_real'] }}">Vis alle resultater i samlingen</a>
</p>

{#  "date_from", "date_to" In this case it is birthdate and deathdate - not used #}
{% set keys = ["portrait", "collectors_link", "creators_link", "firstnames", "lastnames", "gender", "place_of_birth", "place_of_death", "occupation", "industry"] %}
{{ parse_block_first('Stamdata', keys, collector) }}

{% set keys = ["summary", "description", "content_and_scope"] %}
{{ common_fields.parse_block_common('Abstrakt', keys, collector) }}

{% set keys = ["access", "legal_status", "level_of_digitisation", 'citation', 'associated_material'] %}
{{ common_fields.parse_block_common('Tilg√¶ngelighed og brug', keys, collector) }}

{% set keys = ["custodial_history", "accumulation_range", "level_of_kassation", "accrual_status"] %}
{{ common_fields.parse_block_common('Afleveringshistorik', keys, collector) }}

{% set keys = ["sources_normalized"] %}
{{ common_fields.parse_block_common('Literatur og kilder', keys, collector) }}

{# pre(collector)|safe #}

{% if get_setting('debug') %}
<div class="record-section">
    <div class="record-main">
    <h3 class="record-header">Metadata</h3>
    <p><a href="/collectors/{{ collector['id_real'] }}/json">JSON</a></p>
    </div>
</div>
{% endif %}


{% endblock content %}