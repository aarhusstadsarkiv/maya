<style>
    .image-container {
        display: flex;
        overflow-x: auto;
        gap: 10px;
        padding: 10px;
        touch-action: none;
        user-select: none;
        padding: 10px 0;
    }

    .image-container::-webkit-scrollbar {
        display: none;
    }

    .image-item {
        position: relative;
        flex-shrink: 0;
        width: 250px;
        height: 150px;
        cursor: grab;
    }

    .image-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        /* filter: grayscale(100%); */

    }

    .overlay-text {
        position: absolute;
        bottom: 0;
        color: white;
        font-size: 20px;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        background-color: rgba(255, 255, 255, 0.5);
        padding-left: 10px;
        width: 100%;
        cursor: pointer;
    }

    .overlay-text a {
        color: white;
        text-decoration: none;
    }
</style>

{% set image_items = [
{
"image_src": "/assets/udforsk/jul.jpg",
"alt_text": "Jul og Salling",
"link_url": "/search?events=123178",
"link_text": "Jul og Salling"
},
{
"image_src": "/assets/udforsk/jubilæum.jpg",
"alt_text": "Jubilæer",
"link_url": "/search?collection_tags=Jubilæer",
"link_text": "Jubilæer"
},
{
"image_src": "/assets/udforsk/herman_salling.jpg",
"alt_text": "Herman Salling",
"link_url": "/search?people=107435",
"link_text": "Herman Salling"
},
{
"image_src": "/assets/udforsk/folkekultur.jpg",
"alt_text": "Folkekultur og dagligdagsliv",
"link_url": "/search?subjects=33",
"link_text": "Folkekultur og dagligdagsliv"
},
{
"image_src": "/assets/udforsk/ferdinand_salling.jpg",
"alt_text": "Ferdinand Salling",
"link_url": "/search?people=108280",
"link_text": "Ferdinand Salling"
},
{
"image_src": "/assets/udforsk/konfirmation.jpg",
"alt_text": "Konfirmationer",
"link_url": "/search?collection_tags=Konfirmation",
"link_text": "Konfirmationer"
},
{
"image_src": "/assets/udforsk/ejendomme.jpg",
"alt_text": "Ejendomme og bygningsværker",
"link_url": "/search?subjects=10",
"link_text": "Ejendomme og bygningsværker"
}
] %}


<h3 class="main-title">Populære temaer fra arkivet</h3>

<div class="image-container">
    {% for item in image_items %}
    <a href="{{ item.link_url }}">
        <div class="image-item">
            <img src="{{ url_for('static', path=item.image_src) }}" alt="{{ item.alt_text }}">
            <div class="overlay-text">
                {{ item.link_text }}
            </div>
        </div>
    </a>
    {% endfor %}
</div>


<script>
    // Drag images inside the container

    const pointerScroll = (elem) => {
        let clickedElement = null;

        const dragStart = (ev) => {
            elem.setPointerCapture(ev.pointerId);
            startX = ev.clientX;
            isDragging = false;
            clickedElement = ev.target; // Store the initially clicked element
            ev.preventDefault(); // Prevent default image dragging
        };

        const dragEnd = (ev) => {
            elem.releasePointerCapture(ev.pointerId);

            // If there was no dragging, simulate a click
            if (!isDragging && clickedElement) {
                let target = clickedElement;

                // Traverse up to find the closest <a> element
                while (target && target.tagName !== "A") {
                    target = target.parentElement;
                }

                if (target && target.tagName === "A") {
                    window.location.href = target.href;
                }
            }
        };

        const drag = (ev) => {
            if (elem.hasPointerCapture(ev.pointerId)) {
                if (Math.abs(ev.clientX - startX) > 5) {
                    isDragging = true;
                }
                elem.scrollLeft -= ev.movementX;
            }
        };

        elem.addEventListener("pointerdown", dragStart);
        elem.addEventListener("pointerup", dragEnd);
        elem.addEventListener("pointermove", drag);
    };

    document.querySelectorAll(".image-container").forEach(pointerScroll);



</script>